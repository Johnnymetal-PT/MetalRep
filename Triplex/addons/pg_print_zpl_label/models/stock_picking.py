from odoo import models

class StockPicking(models.Model):
    _inherit = 'stock.picking'

    def action_print_zpl_label(self):
        for picking in self:
            zpl = f"""^XA
^CI28
^PW900
^LH50,30
^FWR
^LS99

^FO750,10^GFA,4338,4338,9,M01FF8,L0KFE,K07LFE,J03NFC,J0PF,I03PFC,I0RF,001RFC,007RFE,00TF,01KF8003KFC,03JF8J01JFE,07IFEL07IFE,07IFCL01JF,0JFN0JF81IFEN07IF81IFCN03IFC1IF8N01IFC3IFP0IFC3FFEP07FFC1FFEP03FF80FFCQ0FC,,:::1FF8P01FF83FFEP07FFC3IFP0IFC3IF8N01IFC1IFCN01IFC1IFEN03IF80JFN0JF,0JFCL01JF,07IFEL07IFE,03JFCJ01JFC,01KFC001KF8,00TF,007RFE,003RF8,001RF,I07PFC,I01PF,J07NFC,K07MF,L03KF,,:::::::::::::::::0OF8I01FF81OF8I01FF81OF8I03FF8:::::0OF8I03FF8L03IF8I03FF8M07FF8I03FF8::::::::::::::M03FF8I03FF8:::::N0FF8I03FF8T03FF8T01FF8,:::::::::::::::0OF007JF,1OFE0KFC1OFE1KFC3OFE1KFE:1OFE1KFC:1OFE1KF81OFE0JF,,::::::::::::::::N038,L0LF,K0NF,J07NFE,I03PF8,I0QFE,001RF8,007RFE,00TF,01TF8,03KFE007KFE,07JF8K0JFE,0JFCL03JF,1JF8M0JF81JFN07IF83IFCN03IF83IF8N01IF83IFP0IF83FFEP03FF80FF8P01FF,,:::1FFCP01FFE7FFEP07FFC:7IFP0IFC3IF8N01IF83IF8N03IF81IFCN07IF80JFN0JF,0JF8L03JF,07IFEL07IFE,03JF8J01JFC,01JFCJ03JF8,007IFCJ03JF,003IFCJ07IFC,001IFCJ07IF8,I07FFCJ07FFE,I03FFCJ07FF8,J0FFCJ07FE,J01F8J03F,,::::::::::::::::3LFK03JF83OFE1KF81OFE1KF81OFE3KF8::1OFE1KF8:1OF007JF8,::::::::::::::::::01IF8,1KF8O07,1KFCN03F81KFCN0FFC1KFCM03FFC1KFCM0IFC1KFCL07IFC1KFCK01JFC0KF8K07JFC007FFEK01KFCQ0LF8P03KFE,P0LF8,O03KFE,O0LF8,N03KFE,N0LF8,M03KFE,M0LF8,L03KFE,L0LF8,K03KFE,K0LF8,J03KFE,J0LF8,I03KFE,I07KF8,001KFE,007KF8,01KFE,07KFC,0NFC,1VF81VFC:1VFE:1VFC::N07NF8,:::::::::::::::::07JFP01,1KF8O0F81KFCN03F81KFCM01FFC1KFCM07FFC1KFCL01IFC1KFCL07IFC1KFCK01JFC1KF8K07JFCQ03KFCQ0LF,P03KFC,P0LF,O03KFC,O0LF,N03KFC,N0LF,M03KFC,M0LF,L03KFC,L0LF,K03KFC,K0LF,J03KFC,J0LF,I03KFC,I0LF,003KFC,00LF,03KFC,07KFC,1UF,1VF81VFC:1VFE:1VFC::V078,:::::::::::::06,1FE,1FFC,1FFE,::1FFE07F,1FFE0IF,1FFE0IFE,1FFE0JFE,1FFE0KFE,1FFE0LFC,1FFE07LFC,1FFE07MF8,1FFE01NF8,1FFE007NF,1FFEI0OF,1FFEI01NFE,1FFEJ01NF81FFEK01MF81FFEL03LF81FFEM07KF81FFEM01KF8:1FFEM0LF81FFEL07LF81FFEK03MF81IFJ03NF81IFI01NFE,1IF001OF,1IF00OF8,1IF9OF8,1RFC,1QFC,1PFE,1OFE,1OF,1NF,1MF,1LF8,1KF8,1JF8,1IFC,1FFC,1FC,,:::::::::::::0FFEN0FFC,0IFCL01IF,1JFL01IFC,1JF8K01IFE,1JFEK03JF8,1KF8J01JFC,1KFCJ01JFC,1KFEK0JFE,1LF8J03JF,1LFCK0JF,1LFEK03IF81MFK01IF81MF8K0IFC1MFEK0IFC1IF1JFK07FFC3IF0JF8J07FFC3IF07IFCJ07FFC3FFE03IFEJ07FFC3FFE00JF8I07FFC3FFE007IFCI0IFC3FFE003JF001IFC3FFE001JFC07IF83FFEI0PF83FFEI07OF,3FFEI01NFE,3FFEJ0NFC,3FFEJ03MF8,3FFEJ01MF,3FFEK07KFC,3FFEK01KF,3FFEL03IFC,1P07FC,,:::::::::::::::07FCN07E,0IFCL01FFE,1JFL01IF8,1JFCK03IFE,1JFEK03JF8,1KF8J03JFC,1KFCJ01JFE,1KFEK0JFE,3LFK03JF,3LFCK0JF83LFEK07IF83MFK01IF83MF8K0IFC3MFCK07FFC3IF3IFEK07FFC3IF0JF8J07FFC3IF07IFCJ07FFC3FFE01IFEJ07FFC3FFE00JFJ0IFC3FFE007IFCI0IFC3FFE003JF001IFC3FFE001JFC07IF83FFEI0PF83FFEI03OF,3FFEI01OF,3FFEJ0NFE,3FFEJ07MFC,3FFEJ01MF8,3FFEK0LFE,3FFEK03KF8,3FFCL07IFE,3FF8M07FE,,^FS

^FO780,1000^FWR
^A0,40,30^FDTECIDOS^FS

^FO600,0^FWR
^A0,30,25^FDN ENC:^FS
^FO600,350
^A0,60,60^FD{picking.so_name or ''}^FS
^FO601,351
^A0,60,60^FD{picking.so_name or ''}^FS

^FO500,0^FWR
^A0,30,25^FDCLIENTE:^FS
^FO500,350
^A0,60,60^FD{picking.partner_id.name or ''}^FS
^FO501,351
^A0,60,60^FD{picking.partner_id.name or ''}^FS

^FO450,0^FWR
^A0,30,25^FDREF CLIENTE:^FS
^FO450,350
^A0,60,60^FD{picking.customer_ref or ''}^FS
^FO451,351
^A0,60,60^FD{picking.customer_ref or ''}^FS

^FO350,0^FWR
^A0,30,25^FDTECIDO:^FS
^FO350,350^FWR
^A0,40,40^FD{picking.move_ids[0].product_id.name or ''}^FS
^FO351,351^FWR
^A0,40,40^FD{picking.move_ids[0].product_id.name or ''}^FS

^FO250,0^FWR
^A0,30,25^FDARTIGO:^FS
^FO250,350^FWR
^A0,40,40^FD{picking.mo_product_id.name or ''}^FS
^FO251,351^FWR
^A0,40,40^FD{picking.mo_product_id.name or ''}^FS

^FO150,0^FWR
^A0,30,25^FDQNT:^FS
^FO150,350^FWR
^A0,40,40^FD{picking.move_ids[0].product_uom_qty or ''}^FS
^FO151,351^FWR
^A0,40,40^FD{picking.move_ids[0].product_uom_qty or ''}^FS

^FO100,0^FWR
^A0,30,25^FDDATA:^FS
^FO100,350^FWR
^A0,40,40^FD{picking.scheduled_date.strftime('%d-%m-%Y') if picking.scheduled_date else ''}^FS
^FO101,351^FWR
^A0,40,40^FD{picking.scheduled_date.strftime('%d-%m-%Y') if picking.scheduled_date else ''}^FS
^XZ""" 
            self.env['iot.device'].sudo().search([
                ('name', '=', 'ZDesigner ZD421-203dpi ZPL')
            ]).send_command(zpl)
